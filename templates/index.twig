{% extends "_layout" %}

{% block content %}
<h1>Welcome to the Job Board</h1>

{% if currentUser %}
<div style="background: yellow; padding: 1rem; margin: 1rem 0;">
    <strong>DEBUG INFO:</strong><br>
    User: {{ currentUser.email }}<br>
    Groups: 
    {% for group in currentUser.groups %}
        {{ group.name }} ({{ group.handle }}){% if not loop.last %}, {% endif %}
    {% endfor %}<br>
    In jobPosters group: {{ currentUser.isInGroup('jobPosters') ? 'YES' : 'NO' }}<br>
    Organization field: {{ currentUser.organization.one() ? currentUser.organization.one().title : 'NONE' }}<br>
    Current URL segments: {{ craft.app.request.segments|join('/') }}
</div>
{% endif %}

{% if currentUser %}
    <p>Hello {{ currentUser.firstName }}! You are logged in.</p>
    {% if currentUser.isInGroup('jobPosters') %}
        <p>You are a Job Poster.</p>
        {% if currentUser.organization.one() %}
            <p>Your organization: {{ currentUser.organization.one().title }}</p>
        {% else %}
            <p>You haven't selected an organization yet.</p>
        {% endif %}
    {% endif %}
{% else %}
    <p><a href="/register">Register</a> | <a href="/login">Login</a></p>
{% endif %}
{% endblock %}